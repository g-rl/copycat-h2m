ported aw base from mirele @girlmachinery
function replacements from retro pack @rtros